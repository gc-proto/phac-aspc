<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en"
dir="ltr"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <title>Health Infobase Design Manual - Canada.ca</title>

    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name="description">
    <!--[if gte IE 9 | !IE ]><!-->
    <link href="https://www.canada.ca/etc/designs/canada/wet-boew/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/wet-boew/css/theme.min.css">
    <link rel="stylesheet" href="../../../css/toc.css">
    <link rel="stylesheet" href="../../../css/in-page.css">
    <link rel="stylesheet" href="../../../css/alpha-beta-banner.css" />
    <link rel="stylesheet" href="../../../css/cra-fieldflow.css" />
    <link rel="stylesheet" href="../../../css/boxes.css" />


    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script> 		<!-- makes ToC work -->

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <!--<![endif]-->
    <!--[if lt IE 9]>
<link href="./GCWeb/assets/favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="./GCWeb/css/ie8-theme.min.css" />
		<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.
		min.js"></script> <script
		src="./wet-boew/js/ie8-wet-boew.min.js"></script> <![endif]-->
    <!--[if lte IE 9]>
		<![endif]-->
    <noscript>
        <link rel="stylesheet" href="./wet-boew/css/noscript.min.css" />
    </noscript>
</head>

<style>

</style>

<body id="start" class="page-type-nav cnt-wdth-lmtd" vocab="http://schema.org/" typeof="WebPage" data-spy="scroll" data-target="#toc">
    <ul id="wb-tphp">
        <li class="wb-slc"> <a class="wb-sl" href="#wb-cont">Skip to main content</a> </li>
        <li class="wb-slc"> <a class="wb-sl" href="#wb-info">Skip to "About
		government"</a> </li>
    </ul>
    <header>
    <div id="wb-bnr" class="container-fluid">
    <section id="wb-lng" class="text-right">
    <h1 class="wb-inv">Language selection</h2>
    <ul class="list-inline margin-bottom-none">
    <li><a lang="fr" href="#">Français</a></li>
    </ul>
    </section>
    <div class="row">
    <div class="brand col-xs-5 col-md-4">
    <a href="https://www.canada.ca"><img src="https://www.canada.ca/etc/designs/canada/wet-boew/assets/sig-blk-en.svg" alt=""><span class="wb-inv"> Government of Canada / <span lang="fr">Gouvernement du Canada</span></span></a>
    </div>

    </div>
    </div>


    </header>



<main property="mainContentOfPage" class="wb-prettify all-pre">
<div class="container-fluid" style="padding:0px;">
    	<section class="blue-header well well-sm brdr-0 mrgn-bttm-0 mrgn-tp-0">
<h2 class="mrgn-tp-md"><a class="top-menu" href="../../index.html">Health Infobase Design Manual</a></h2>
        		</section>
            <section class="brdr-0">
  <div class="row">

    <section class="col-sm-12 visible-xs visible-sm">

      <a id="btn-toc" class="btn btn-block btn-primary wb-lbx lbx-modal" title="Example of a modal popup" href="#inline_content_modal" style="color: white !important; border-radius: 0px;"><i class="fas fa-bars"></i>&nbsp Table of contents</a>

      <section id="inline_content_modal" class="mfp-hide modal-dialog modal-content overlay-def">
			<header class="modal-header">
				<h2 class="modal-title">Table of contents</h2>
			</header>
			<div class="modal-body">
        <ul>

          <li > <a href="../../getting-started.html">Getting started</a></li>

            <li><a href="../../data.html">Data</a>
          </li>
            <li><a href="../../dataviz.html">Storytelling and visualization</a>
              <ul>

                <li><a href=".../tasks.html">User needs and data tasks</a></li>
                <li><a href="./visualization.html">Data visualization</a></li>
            </ul>
          </li>
            <li><a href="../library.html">Pattern library</a>

            </li>
            <li><a href="../performance.html">Performance measurement</a></li>


      </ul>
			</div>
		</section>
    </section>

    <div class="mgrn-tp-xl visible-sm"><p><br></p></div> <!-- temp test fix for menu covering button -->
<div class="col-md-2 global-toc visible-md visible-lg">
  <h2 class="h3 mrgn-lft-md">Table of contents</h2>

  <ul class="menu-list lst-none">

    <li > <a href="../../getting-started.html">Getting started</a></li>
      <li><a href="../../data.html">Data</a>
</li>

      <li><a href="../../dataviz.html">Storytelling and visualization</a>

        <ul class="menu-list lst-none">

        <li><a href="../tasks.html">User needs and data tasks</a></li>
        <li><a href="../visualization.html">Data visualization</a>

          <ul class="menu-list lst-none">
            <li><a class="active" href="./types.html">Choosing a visualization type</a></li>
            <li><a href="./design.html">Design</a></li>
            <li><a href="./content.html">Content and copywriting</a></li>
            </ul>

          </li>
  </ul>
</li>
      <li><a href="../../library.html">Pattern library</a>

      </li>
      <li><a href="../../performance.html">Performance measurement</a></li>

</ul>

</div>


    <div class="col-md-2 visible-md visible-lg">
<div class="row">

      <nav id="toc" data-spy="affix" data-toggle="toc" class="affix col-xs-12 col-sm-12" >


<h2 class="h3 mrgn-lft-lg">On this page</h2>



                <ul class="nav mrgn-lft-lg">

                  <li class="longdoc-toc-link"><a href="#explanatory">Explanatory vs exploratory visualization</a></li>
                  <li class="longdoc-toc-link"><a href="#static">Static vs interactive</a></li>
                  <li class="longdoc-toc-link"><a href="#choosing">Choosing the right type for the task</a></li>


                  </ul>

          </nav>
    </div>
</div>

<div class="col-md-7 mrgn-tp-lg" style="padding-left: 40px; padding-right: 40px">

<h1 class="gc-thickline mrgn-tp-0">Choosing a visualization type</h1>

<div class="visible-xs visible-sm">

<h2 class="h3">On this page</h2>
<ul>
  <li><a href="#explanatory">Explanatory vs exploratory visualization</a></li>
  <li><a href="#static">Static vs interactive</a></li>
  <li><a href="#choosing">Choosing the right type for the task</a></li>

</ul>
</div>
<p>Choose a visualization technique that will help people complete their tasks. </p>

<h2 id="explanatory">Explanatory vs exploratory visualization</h2>
<p><strong>Explanatory </strong>visualization is showing specific highlights to the audience. For example, illustrating the correlation between 2 things, or the distribution of different values). It deliberately highlights some “nuggets of wisdom” from the data. </p>
   <p><strong>Exploratory </strong>visualization lets people go through the data themselves and find insights. It supports self-interpretation of the data. </p>
   <p>When creating a data product, think carefully about how much data exploration you want to enable. Too many options and features may make it difficult for people to extract useful information. </p>
   <p>Think of the <a href="../tasks.html#range">range of tasks</a> you need to enable. Start with explanatory visualization, and gradually allow users to explore by themselves, if it makes sense. </p>
   <ul>
      <li><a href="https://www.storytellingwithdata.com/blog/2014/04/exploratory-vs-explanatory-analysis">Exploratory vs explanatory analysis (Storytelling with data)</a></li>
   </ul>
<h2 id="static">Static vs interactive</h2>
<p>Data visualization doesn’t always have to be interactive. Sometimes, a static visualization may work better to support the tasks and the story you’re trying to tell. </p>
<p><strong>Static </strong>visualizations work best to support <strong>explanatory </strong>tasks, where the insights are already extracted and you want to show a specific thing. </p>
<p><strong>Interactive </strong>visualizations work best to support <strong>exploratory </strong>tasks, where users are in charge of exploring the data and extract insights by themselves. </p>
<p>A comprehensive dashboard where everything can be explored is not always the best way to support users in their tasks. Just because we can do interactive charts doesn’t mean we always should. It all depends on what we want people to do with the data. </p>


<h2 id="choosing">Choosing the right type for the task</h2>
<p>The choice of graph depends on what you’re trying to illustrate.</p>



<div class="wb-frmvld fieldflow-lg">
  <form>
      <div class="wb-fieldflow" data-wb-fieldflow="{&quot;noForm&quot;: true, &quot;isoptional&quot;: true, &quot;renderas&quot;: &quot;radio&quot;, &quot;reset&quot;: {&quot;action&quot;: &quot;addClass&quot;, &quot;source&quot;: &quot;.viztype&quot;, &quot;class&quot;: &quot;hidden&quot;}}" id="types">
          <p>What do you want to illustrate?</p>
          <ul>
            <li data-wb-fieldflow="{&quot;action&quot;: &quot;removeClass&quot;, &quot;source&quot;: &quot;#answer1-1&quot;, &quot;class&quot;: &quot;hidden&quot;, &quot;live&quot;: true}">Capture a trend</li>
            <li data-wb-fieldflow="{&quot;action&quot;: &quot;removeClass&quot;, &quot;source&quot;: &quot;#answer1-2&quot;, &quot;class&quot;: &quot;hidden&quot;, &quot;live&quot;: true}">Show relationships</li>
            <li data-wb-fieldflow="{&quot;action&quot;: &quot;removeClass&quot;, &quot;source&quot;: &quot;#answer1-3&quot;, &quot;class&quot;: &quot;hidden&quot;, &quot;live&quot;: true}">Part to whole</li>
            <li data-wb-fieldflow="{&quot;action&quot;: &quot;removeClass&quot;, &quot;source&quot;: &quot;#answer1-4&quot;, &quot;class&quot;: &quot;hidden&quot;, &quot;live&quot;: true}">Single value</li>
            <li data-wb-fieldflow="{&quot;action&quot;: &quot;removeClass&quot;, &quot;source&quot;: &quot;#answer1-5&quot;, &quot;class&quot;: &quot;hidden&quot;, &quot;live&quot;: true}">Distribution</li>
            <li data-wb-fieldflow="{&quot;action&quot;: &quot;removeClass&quot;, &quot;source&quot;: &quot;#answer1-6&quot;, &quot;class&quot;: &quot;hidden&quot;, &quot;live&quot;: true}">Flow</li>

          </ul>
      </div>
  </form>
</div>


  <div id="answer1-1" class="hidden viztype well">
    <h3 class="mrgn-tp-sm">Capture a trend</h3>
    <p>Use these types of visualization to illustrate a trend:</p>
    <ul>
       <li><a href="#line">Line chart</a></li>
       <li><a href="#area">Area chart</a></li>
    </ul>

    <h4 id="line">Line chart</h4>
    <p>Example of a single line chart:</p>
    <div id="line_div"></div>

    <p>Example of a multi-line chart:</p>
    <div id="multiline_div"></div>

    <a href="../../library/line-chart.html">Consult line chart guidance</a>

   <h4 id="area">Area chart</h4>   

   <p>Example of an area chart:</p>
   <div id="areachart_div"></div>


</div>
  <div id="answer1-2" class="hidden viztype well">
    <h3 class="mrgn-tp-sm">Show relationships</h3>

    <p>Use these types of visualization to illustrate a trend:</p>
    <ul>
       <li><a href="#bar">Bar chart (horizontal and vertical)</a></li>
       <li><a href="#scatter">Scatter plot</a></li>
       <li><a href="#bubble">Bubble chart</a></li>
       <li><a href="#word">Word cloud</a></li>
    </ul>


    <h4 id="bar">Bar chart</h4>
    <p>Example of a verical bar chart:</p>
    <div id="verticalbar_div"></div>

    <p>Example of a horizontal bar chart:</p>
    <div id="horizontalbar_div"></div>

    <a href="../../library/bar-graphs.html">Consult bar chart guidance</a>


    <h4 id="scatter">Scatter plot</h4>
    <p>Example of a scatter plot:</p>
    <div id="scatterplot_div"></div>

    
    <h4 id="bubble">Bubble chart</h4>
    <p>Example of a bubble chart:</p>
    <div id="bubble_div"></div>


    <h4 id="word">Word cloud</h4>
    <p>Example of a word cloud:</p>
    <div id="word-cloud"></div>
    

  </div>

  <div id="answer1-3" class="hidden viztype well">
    <h3 class="mrgn-tp-sm">Part-to-whole</h3>
    <p>Use these types of visualization to illustrate a part-to-whole relationship:</p>
    <ul>
       <li><a href="#pie">Pie chart and dougnut chart</a></li>
       <li><a href="#heat">Heat maps</a></li>
       <li><a href="#stackedbar">Stacked bar chart</a></li>
       <li><a href="#tree">Treemap charts</a></li>
    </ul>


    <h4 id="pie">Pie chart and dougnut chart</h4>
    <p>Example of a verical pie chart:</p>
    <div id="pie_div"></div>

    <p>Example of a doughnut chart:</p>
    <div id="doughnut_div"></div>

    <a href="../../library/pie-charts.html">Consult pie chart guidance</a>


    <h4 id="heat">Heat maps</h4>
    <p>Example of a heat map:</p>
    <div id="heat_map"></div>

    
    <h4 id="stackedbar">Stacked bar chart</h4>
    <p>Example of a stacked bar chart:</p>
    <div id="stackedbar_div"></div>


    <h4 id="tree">Tree map charts</h4>
    <p>Example of a treemap chart:</p>
    <div id="treemap_div"></div>
  </div>

  <div id="answer1-4" class="hidden viztype well">
      <h3 class="mrgn-tp-sm">Single value</h3>
    <p>Use these types of visualization to ilustrate a single value:</p>
    <ul>
       <li><a href="#key">Key update</a></li>
       <li><a href="#gauge">Gauge</a></li>
       <li><a href="#table">Responsive table</a></li>
    </ul>


    <h4 id="key">Key update</h4>
    <p>Example of a verical key update:</p>
    <div class='boxes col-md-12' style="">
      <div id="box4" class="innerBox col-md-12 col-sm-12">
          <div class="col-xs-12 col-print-12 mrgn-tp-msm mrgn-bttm-sm">
              <a href="#a2" data-figure="1" data-type-stat="num" data-type-measure="tests" id="keybox7">
                  <div class="mrgn-tp-lg mrgn-bttm-lg">
                      <p>Weekly tests reported</p>
                      <p class="h2"><span class="numTests">89913</span></p>
                  </div>
              </a>
          </div>
      </div>
  
    </div>
    <h4 id="gauge">Gauge</h4>
    <p>Example of a gauge:</p>
    <div id="gauge_test"></div>
    
    <h4 id="table">Responsive table</h4>
    <p>Example of a responsive table:</p>
    <table class="provisional gc-table table" id="myTable1">
      <caption>Population growth in Canadian cities</caption>
      <thead>
       <tr>
        <th>City</th>
        <th>Population in 2007</th>
        <th>Population in 2017</th>
        <th>Percentage change</th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td data-label="City">Toronto</td>
        <td data-label="Population in 2007">5,418,207</td>
        <td data-label="Population in 2017">6,346,088</td>
        <td data-label="Percentage change">17.1%</td>
       </tr>
       <tr>
        <td data-label="City">Montréal</td>
        <td data-label="Population in 2007">3,714,846</td>
        <td data-label="Population in 2017">4,138,254</td>
        <td data-label="Percentage change">11.4%</td>
       </tr>
       <tr>
        <td data-label="City">Vancouver</td>
        <td data-label="Population in 2007">2,218,134</td>
        <td data-label="Population in 2017">2,571,262</td>
        <td data-label="Percentage change">15.9%</td>
       </tr>
       <tr>
        <td data-label="City">Ottawa–Gatineau</td>
        <td data-label="Population in 2007">1,188,073</td>
        <td data-label="Population in 2017">1,377,016 </td>
        <td data-label="Percentage change">15.9%</td>
       </tr>
      </tbody>
     </table>
     <a href="https://design.canada.ca/common-design-patterns/tables.html">Consult Canada.ca guidance on tables</a>



  </div>




  <div id="answer1-5" class="hidden viztype well">
    
    <h3 class="mrgn-tp-sm">Distribution</h3>

    <p>Use these types of visualization to illustrate a distribution:</p>
    <ul>
       <li><a href="#histogram">Histogram</a></li>
       <li><a href="#box">Box plot</a></li>
       <li><a href="#violin">Violin plot</a></li>
       <li><a href="#density">Density plot</a></li>
       <li><a href="#map">Map</a></li>
    </ul>


    <h4 id="histogram">Histogram</h4>
    <p>Example of a histogram:</p>
    <div id="histogram_div"></div>


    <h4 id="box">Box plot</h4>
    <p>Example of a box plot:</p>
    <div id="boxplot_div"></div>

    
    <h4 id="violin">Violin plot</h4>
    <p>Example of a violin plot:</p>
    <div id="violin_div"></div>


    <h4 id="density">Density plot</h4>
    <p>Example of a density plot:</p>
    <div id="density_div"></div>

    
    <h4 id="map">Map</h4>
    <p>Example of a map:</p>
    <div id="map_div"></div>

  </div>
   
  <div id="answer1-6" class="hidden viztype">
    <h3>Flow</h3>
    <ul>
       <li>Sankey chart</li>
       <li>Network chart</li>
    </ul>

  </div>
   


   <h2>Additional resources: </h2>
   <ul>
      <li><a href="https://www.datacamp.com/cheat-sheet/data-viz-cheat-sheet">Data Visualization Cheat Sheet - Data Camp</a></li>
   </ul>


    <div class="clearfix"></div>
    	<div class="row pagedetails">




    		<div class="datemod col-xs-12 mrgn-tp-lg">
    				<dl id="wb-dtmd">
    		<dt>Date modified:</dt>
    		<dd><time property="dateModified">2022-10-28</time></dd>
    	</dl>
    		</div>

    	</div>
    		</main>

      </section>





</div>


    		<footer id="wb-info">
    	<div class="landscape">
    	<nav class="container wb-navcurr">
    	<h2 class="wb-inv">About this guide</h2>
    	<ul class="list-unstyled colcount-sm-2 colcount-md-3">
    	<li><a href="mailto:phac.infobase.aspc@canada.ca">Contact the Infobase Team</a></li>
    	<li><a href="https://www.canada.ca/en/government/dept.html">Departments and agencies</a></li>
    	<li><a href="https://www.canada.ca/en/government/publicservice.html">Public service and military</a></li>
    	<li><a href="https://www.canada.ca/en/news.html">News</a></li>
    	<li><a href="https://www.canada.ca/en/government/system/laws.html">Treaties, laws and regulations</a></li>
    	<li><a href="https://www.canada.ca/en/transparency/reporting.html">Government-wide reporting</a></li>
    	<li><a href="https://pm.gc.ca/eng">Prime Minister</a></li>
    	<li><a href="https://www.canada.ca/en/government/system.html">How government works</a></li>
    	<li><a href="https://open.canada.ca/en/">Open government</a></li>
    	</ul>
    	</nav>
    	</div>
    	<div class="brand">
    	<div class="container">
    	<div class="row">
    	<nav class="col-md-9 col-lg-10 ftr-urlt-lnk">
    	<h2 class="wb-inv">About this site</h2>
    	<ul>
    	<li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
    	<li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
    	<li><a href="https://www1.canada.ca/en/newsite.html">About Canada.ca</a></li>
    	<li><a href="https://www.canada.ca/en/transparency/terms.html">Terms and conditions</a></li>
    	<li><a href="https://www.canada.ca/en/transparency/privacy.html">Privacy</a></li>
    	</ul>
    	</nav>
    	<div class="col-xs-6 visible-sm visible-xs tofpg">
    	<a href="#wb-cont">Top of Page <span class="glyphicon glyphicon-chevron-up"></span></a>
    	</div>
    	<div class="col-xs-6 col-md-3 col-lg-2 text-right">
    	<img src="http://www.canada.ca/etc/designs/canada/wet-boew/assets/wmms-blk.svg" alt="Symbol of the Government of Canada">
    	</div>
    	</div>
    	</div>
    	</div>
    	</footer>
    	<!--[if gte IE 9 | !IE ]><!-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
      <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/wet-boew.min.js"></script>
      <script src="../../../js/toc-custom.js"></script>
      <script src="../../../js/alpha-banner.js"></script>

      <!--<![endif]-->
      <!--[if lt IE 9]>
          <script src="./wet-boew/js/ie8-wet-boew2.min.js"></script>

          <![endif]-->
      <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/theme.min.js"></script>

    <script type="text/javascript">
      google.charts.load('current', {
        packages: ['corechart', 'line']
      });
      google.charts.setOnLoadCallback(drawBasic);
      
      function drawBasic() {
      
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'X');
        data.addColumn('number', 'Dogs');
      
        data.addRows([
          [0, 0],
          [1, 10],
          [2, 23],
          [3, 17],
          [4, 18],
          [5, 9],
          [6, 11],
          [7, 27],
          [8, 33],
          [9, 40],
          [10, 32],
          [11, 35],
          [12, 30],
          [13, 40],
          [14, 42],
          [15, 47],
          [16, 44],
          [17, 48],
          [18, 52],
          [19, 54],
          [20, 42],
          [21, 55],
          [22, 56],
          [23, 57],
          [24, 60],
          [25, 50],
          [26, 52],
          [27, 51],
          [28, 49],
          [29, 53],
          [30, 55],
          [31, 60],
          [32, 61],
          [33, 59],
          [34, 62],
          [35, 65],
          [36, 62],
          [37, 58],
          [38, 55],
          [39, 61],
          [40, 64]
        ]);
      
        var options = {
          width: 600,
          height: 400,
          hAxis: {
            title: 'Time'
          },
          vAxis: {
            title: 'Popularity'
          }
        };
      
        var chart = new google.visualization.LineChart(document.getElementById('line_div'));
      
        chart.draw(data, options);
      }

      google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(drawCurveTypes);

function drawCurveTypes() {
      var data = new google.visualization.DataTable();
      data.addColumn('number', 'X');
      data.addColumn('number', 'Dogs');
      data.addColumn('number', 'Cats');

      data.addRows([
        [0, 0, 0],    [1, 10, 5],   [2, 23, 15],  [3, 17, 9],   [4, 18, 10],  [5, 9, 5],
        [6, 11, 3],   [7, 27, 19],  [8, 33, 28],  [9, 40, 45],  [10, 32, 35], [11, 35, 34],
        [12, 30, 30], [13, 40, 32], [14, 42, 38], [15, 47, 28], [16, 44, 26], [17, 48, 24],
        [18, 52, 32], [19, 54, 46], [20, 42, 22], [21, 55, 35], [22, 56, 39], [23, 57, 47],
        [24, 60, 55], [25, 50, 58], [26, 52, 60], [27, 51, 62], [28, 49, 55], [29, 53, 68],
        [30, 55, 70]
      ]);

      var options = {
        width: 600,
        height: 400,
        hAxis: {
          title: 'Time'
        },
        vAxis: {
          title: 'Popularity'
        },
        series: {
          1: {curveType: 'function'}
        }
      };

      var chart = new google.visualization.LineChart(document.getElementById('multiline_div'));
      chart.draw(data, options);
    }

      google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawStacked);

function drawStacked() {
      var data = google.visualization.arrayToDataTable([
        ['City', '2010 Population', '2000 Population'],
        ['New York City, NY', 8175000, 8008000],
        ['Los Angeles, CA', 3792000, 3694000],
        ['Chicago, IL', 2695000, 2896000],
        ['Houston, TX', 2099000, 1953000],
        ['Philadelphia, PA', 1526000, 1517000]
      ]);

      var options = {
        title: 'Population of Largest U.S. Cities',
        chartArea: { width: "40%", height: "50%" },
        width: 600,
        height: 400,
        isStacked: true,
        hAxis: {
          title: 'Total Population',
          minValue: 0,
        },
        vAxis: {
          title: 'City'
        }
      };
      var chart = new google.visualization.BarChart(document.getElementById('horizontalbar_div'));
      chart.draw(data, options);
    }



  google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Age', 'Weight'],
          [ 8,      12],
          [ 4,      5.5],
          [ 11,     14],
          [ 4,      5],
          [ 3,      3.5],
          [ 6.5,    7]
        ]);

        var options = {
          width: 600,
          height: 400,
          title: 'Age vs. Weight comparison',
          hAxis: {title: 'Age', minValue: 0, maxValue: 15},
          vAxis: {title: 'Weight', minValue: 0, maxValue: 15},
          legend: 'none'
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('scatterplot_div'));

        chart.draw(data, options);
      }
    </script> 

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2013',  1000,      400],
      ['2014',  1170,      460],
      ['2015',  660,       1120],
      ['2016',  1030,      540]
    ]);

    var options = {
      width: 600,
      height: 400,
      title: 'Company Performance',
      hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
      vAxis: {minValue: 0}
    };

    var chart = new google.visualization.AreaChart(document.getElementById('areachart_div'));
    chart.draw(data, options);
  }

  
 
</script>
<script type="text/javascript">
google.charts.load("current", {packages:['corechart']});
google.charts.setOnLoadCallback(drawChart);
function drawChart() {
  var data = google.visualization.arrayToDataTable([
    ["Element", "Density", { role: "style" } ],
    ["Copper", 8.94, "#b87333"],
    ["Silver", 10.49, "silver"],
    ["Gold", 19.30, "gold"],
    ["Platinum", 21.45, "color: #e5e4e2"]
  ]);

  var view = new google.visualization.DataView(data);
  view.setColumns([0, 1,
                   { calc: "stringify",
                     sourceColumn: 1,
                     type: "string",
                     role: "annotation" },
                   2]);

  var options = {
    title: "Density of Precious Metals, in g/cm^3",
    width: 600,
    height: 400,
    bar: {groupWidth: "95%"},
    legend: { position: "none" },
  };
  var chart = new google.visualization.ColumnChart(document.getElementById("verticalbar_div"));
  chart.draw(view, options);
}
</script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawSeriesChart);

function drawSeriesChart() {

  var data = google.visualization.arrayToDataTable([
    ['ID', 'Life Expectancy', 'Fertility Rate', 'Region',     'Population'],
    ['CAN',    80.66,              1.67,      'North America',  33739900],
    ['DEU',    79.84,              1.36,      'Europe',         81902307],
    ['DNK',    78.6,               1.84,      'Europe',         5523095],
    ['EGY',    72.73,              2.78,      'Middle East',    79716203],
    ['GBR',    80.05,              2,         'Europe',         61801570],
    ['IRN',    72.49,              1.7,       'Middle East',    73137148],
    ['IRQ',    68.09,              4.77,      'Middle East',    31090763],
    ['ISR',    81.55,              2.96,      'Middle East',    7485600],
    ['RUS',    68.6,               1.54,      'Europe',         141850000],
    ['USA',    78.09,              2.05,      'North America',  307007000]
  ]);

  var options = {
    width: 600,
    height: 400,
    title: 'Fertility rate vs life expectancy in selected countries (2010)',
    hAxis: {title: 'Life Expectancy'},
    vAxis: {title: 'Fertility Rate'},
    bubble: {textStyle: {fontSize: 11}}
  };

  var chart = new google.visualization.BubbleChart(document.getElementById('bubble_div'));
  chart.draw(data, options);
}
</script>

<script type="text/javascript">
  // Set the dimensions of the canvas
  var width = 600;
  var height = 400;

  // Define the data for the word cloud
  var data = [
    {text: "Data", size: 20},
    {text: "Visualization", size: 40},
    {text: "Charts", size: 17},
    {text: "Graphs", size: 25},
    {text: "Maps", size: 10},
    {text: "Plots", size: 10},
    {text: "Information", size: 12},
    {text: "User", size: 35},
    {text: "Insights", size: 13},
    {text: "Tasks", size: 28},
  ];

  // Define the colors for the word cloud
  var colors = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];

  // Create the word cloud layout
  var layout = d3.layout.cloud()
    .size([width, height])
    .words(data)
    .rotate(function() { return ~~(Math.random() * 2) * 90; })
    .fontSize(function(d) { return d.size; })
    .on("end", draw);

  // Draw the word cloud
  function draw(words) {
    d3.select("#word-cloud").append("svg")
      .attr("width", layout.size()[0])
      .attr("height", layout.size()[1])
      .style("background-color", "#fff") // Set the background color to white
      .append("g")
      .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
      .selectAll("text")
      .data(words)
      .enter().append("text")
      .style("font-size", function(d) { return d.size + "px"; })
      .style("fill", function(d, i) { return colors[i]; })
      .attr("text-anchor", "middle")
      .attr("transform", function(d) {
        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
      })
      .text(function(d) { return d.text; });
  }

  // Start the word cloud layout
  layout.start();
</script>


<script type="text/javascript">
google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          width: 600,
        height: 400,
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('pie_div'));

        chart.draw(data, options);
      }

</script>

<script type="text/javascript">

google.charts.load('current', {'packages':['treemap']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Location', 'Parent', 'Market trade volume (size)', 'Market increase/decrease (color)'],
          ['Global',    null,                 0,                               0],
          ['America',   'Global',             0,                               0],
          ['Europe',    'Global',             0,                               0],
          ['Asia',      'Global',             0,                               0],
          ['Australia', 'Global',             0,                               0],
          ['Africa',    'Global',             0,                               0],
          ['Brazil',    'America',            11,                              10],
          ['USA',       'America',            52,                              31],
          ['Mexico',    'America',            24,                              12],
          ['Canada',    'America',            16,                              -23],
          ['France',    'Europe',             42,                              -11],
          ['Germany',   'Europe',             31,                              -2],
          ['Sweden',    'Europe',             22,                              -13],
          ['Italy',     'Europe',             17,                              4],
          ['UK',        'Europe',             21,                              -5],
          ['China',     'Asia',               36,                              4],
          ['Japan',     'Asia',               20,                              -12],
          ['India',     'Asia',               40,                              63],
          ['Laos',      'Asia',               4,                               34],
          ['Mongolia',  'Asia',               1,                               -5],
          ['Israel',    'Asia',               12,                              24],
          ['Iran',      'Asia',               18,                              13],
          ['Pakistan',  'Asia',               11,                              -52],
          ['Egypt',     'Africa',             21,                              0],
          ['S. Africa', 'Africa',             30,                              43],
          ['Sudan',     'Africa',             12,                              2],
          ['Congo',     'Africa',             10,                              12],
          ['Zaire',     'Africa',             8,                               10]
        ]);

        tree = new google.visualization.TreeMap(document.getElementById('treemap_div'));

        tree.draw(data, {
          width: 600,
          height: 400,
          minColor: '#f00',
          midColor: '#ddd',
          maxColor: '#0d0',
          headerHeight: 15,
          fontColor: 'black',
          showScale: true
        });

      }

    </script>
<script type="text/javascript">
  google.charts.load("current", {packages:["corechart"]});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Work',     11],
      ['Eat',      2],
      ['Commute',  2],
      ['Watch TV', 2],
      ['Sleep',    7]
    ]);

    var options = {
      width: 600,
      height: 400,
      title: 'My Daily Activities',
      pieHole: 0.4,
    };

    var chart = new google.visualization.PieChart(document.getElementById('doughnut_div'));
    chart.draw(data, options);
  }
</script>

<script type="text/javascript">
  google.charts.load('current', {packages:['corechart']});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {

    var data = google.visualization.arrayToDataTable([
      ['Genre', 'Fantasy & Sci Fi', 'Romance', 'Mystery/Crime', 'General',
       'Western', 'Literature', { role: 'annotation' } ],
      ['2010', 10, 24, 20, 32, 18, 5, ''],
      ['2020', 16, 22, 23, 30, 16, 9, ''],
      ['2030', 28, 19, 29, 30, 12, 13, '']
    ]);

    var options = {
      width: 600,
      height: 400,
      legend: { position: 'top', maxLines: 3 },
      bar: {groupWidth: '75%'},
      isStacked: true,
    };

    var chart = new google.visualization.BarChart(document.getElementById('stackedbar_div'));
    chart.draw(data, options);
}
</script>


<script>
  // Sample data
  var data = [
    // Average temperature for each month in Montreal over the last 10 years
    { month: "Jan", year: 2021, temperature: -10 },
    { month: "Feb", year: 2021, temperature: -8 },
    { month: "Mar", year: 2021, temperature: -4 },
    { month: "Apr", year: 2021, temperature: 4 },
    { month: "May", year: 2021, temperature: 12 },
    { month: "Jun", year: 2021, temperature: 17 },
    { month: "Jul", year: 2021, temperature: 20 },
    { month: "Aug", year: 2021, temperature: 19 },
    { month: "Sep", year: 2021, temperature: 15 },
    { month: "Oct", year: 2021, temperature: 9 },
    { month: "Nov", year: 2021, temperature: 2 },
    { month: "Dec", year: 2021, temperature: -5 },
    { month: "Jan", year: 2020, temperature: -7 },
    { month: "Feb", year: 2020, temperature: -5 },
    { month: "Mar", year: 2020, temperature: 0 },
    { month: "Apr", year: 2020, temperature: 6 },
    { month: "May", year: 2020, temperature: 14 },
    { month: "Jun", year: 2020, temperature: 19 },
    { month: "Jul", year: 2020, temperature: 22 },
    { month: "Aug", year: 2020, temperature: 21 },
    { month: "Sep", year: 2020, temperature: 17 },
    { month: "Oct", year: 2020, temperature: 11 },
    { month: "Nov", year: 2020, temperature: 4 },
    { month: "Dec", year: 2020, temperature: -3 },
    { month: "Jan", year: 2019, temperature: -12 },
    { month: "Feb", year: 2019, temperature: -10 },
    { month: "Mar", year: 2019, temperature: -6 },
    { month: "Apr", year: 2019, temperature: 2 },
    { month: "May", year: 2019, temperature: 10 },
    { month: "Jun", year: 2019, temperature: 15 },
    { month: "Jul", year: 2019, temperature: 18 },
    { month: "Aug", year: 2019, temperature: 17 },
    { month: "Sep", year: 2019, temperature: 13 },
    { month: "Oct", year: 2019, temperature: 7 },
    { month: "Nov", year: 2019, temperature: 0 },
    { month: "Dec", year: 2019, temperature: -7 },
    // ...
    ];
  // Temperature scale in Celsius
var temperatureScale = d3.scaleLinear()
  .domain([-12, 22])
  .range([0, 100]);
// Color scale for heat map
var colorScale = d3.scaleLinear()
  .domain([0, 100])
  .range(["#ffffff", "#8b0000"]);
// Select the div where the heat map will be drawn
var chart = d3.select("#heat_map");
// Add an SVG element to the div
var svg = chart.append("svg")
  .attr("width", 900)
  .attr("height", 200);
// Add a label for the legend
svg.append("text")
  .attr("x", 50)
  .attr("y", 25)
  .text("Average temperature in Montreal");
  svg.selectAll("rect")
  .data(data)
  .enter()
  .append("rect")
  .attr("x", (d, i) => (i % 12) * 50 + 50)
  .attr("y", (d, i) => Math.floor(i / 12) * 50)
  .attr("width", 50)
  .attr("height", 50)
  .style("fill", (d) => colorScale(temperatureScale(d.temperature)));
// Add text for each year
svg.selectAll("year")
  .data(data)
  .enter()
  .append("text")
  .attr("x", (d, i) => 10)
  .attr("y", (d, i) => Math.floor(i / 12) * 50 + 25)
  .style("text-anchor", "middle")
  .style("dominant-baseline", "central")
  .text((d) => d.year);
// Add text for each month
svg.selectAll("month")
  .data(data)
  .enter()
  .append("text")
  .attr("x", (d, i) => (i % 12) * 50 + 75)
  .attr("y", (d, i) => 0) // position month labels at the top of the chart
  .style("text-anchor", "middle")
  .style("dominant-baseline", "central")
  .text((d) => d.month);
// Add text for each temperature
svg.selectAll("temperature")
  .data(data)
  .enter()
  .append("text")
  .attr("x", (d, i) => (i % 12) * 50 + 75)
  .attr("y", (d, i) => Math.floor(i / 12) * 50 + 25)
  .style("fill", (d) => {     
    // Calculate the appropriate text color based on the background color of the heatmap cell  
    var backgroundColor = colorScale(temperatureScale(d.temperature));
    // Return a color with high contrast to the background color
    return getContrastingColor(backgroundColor);
  })
  .style("text-anchor", "middle")
  .style("dominant-baseline", "central")
  .text((d) => d.temperature);
function getContrastingColor(backgroundColor) {
// Convert the background color to HSL (hue, saturation, lightness) format   
const hsl = getHSLFromColor(backgroundColor);   

// Calculate the relative luminance of the background color  
// See https://www.w3.org/TR/WCAG21/#dfn-relative-luminance   
let luminance = 0.2126 * hsl.l;   
luminance += 0.7152 * hsl.s;   
luminance += 0.0722 * hsl.h;  
 // If the luminance is less than 0.5, return white as the contrasting color,   // otherwise return black   
return luminance < 0.5 ? '#fff' : '#000';
}
</script>

  <script>
    // Set the dimensions of the gauge
    var width = 250;
    var height = 250;

    // Set the range of the gauge
    var angleRange = 120;
    var minValue = 0;
    var maxValue = 1000;

    // Set the colors for the gauge
    var color = d3.scaleLinear()
      .domain([minValue, 600, 800, maxValue])
      .range(["#00ff00", "#ffff00", "#ff0000", "#ff0000"]);

    // Create the SVG container for the gauge
    var svg = d3.select("#gauge_test")
      .append("svg")
      .attr("width", width)
      .attr("height", height);


    // Create the container for the arc and add the arc to it
    var arcGroup = svg.append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
      .append("path")
      .attr("d", arc)
      .attr("fill", color(0));

          // Create the circular arc for the gauge
    var arc = d3.arc()
      .innerRadius(width / 2 - 100)
      .outerRadius(width / 2)
      .startAngle((-angleRange * Math.PI / 180) + (minValue / maxValue) * (angleRange * Math.PI / 180))
      .endAngle((angleRange * Math.PI / 180) - ((maxValue - minValue) / maxValue) * (angleRange * Math.PI / 180));


    // Add the text label for the gauge
    var label = svg.append("text")
      .attr("x", width / 2)
      .attr("y", height / 2)
      .attr("dy", ".35em")
      .attr("text-anchor", "middle")
      .text(0);

// Add ticks to the gauge
var ticks = [0, 250, 500, 750, 1000];
var tickArc = d3.arc()
  .innerRadius(width / 2 - 90)
  .outerRadius(width / 2 - 80)
  .startAngle((-angleRange * Math.PI / 180) + (minValue / maxValue) * (angleRange * Math.PI / 180));

    // Update the gauge when new data is available
    function updateGauge(data) {
      // Update the color and value of the gauge
      arcGroup.attr("fill", color(data.value));
      label.text(data.value);

      // Animate the transition of the gauge
      arcGroup.transition()
      .duration(750)
      .attrTween("d", function(d) {
      var interpolate = d3.interpolate(this._current, data.value);
      this._current = interpolate(0);
      return function(t) {
      return arc(interpolate(t));
      };
      });
}

      // Set the initial data value
      data = {value: 750};

      // Define the this._current variable
      this._current = data.value;

      // Update the gauge with the initial data value
      updateGauge(data);

</script>


<script type="text/javascript">
  google.charts.load('current', {packages:['corechart']});
  google.charts.setOnLoadCallback(drawChart);

function drawChart() {

  function randomNorm() {
    return ((Math.random() + Math.random() + Math.random() +
        Math.random() + Math.random() + Math.random()) - 3) / 3;
  }
  var arr = [['Counts']];
  for (var i = 0; i < 5000; i++) {
    arr.push([randomNorm()]);
  }
  var data = google.visualization.arrayToDataTable(arr);

  var options = {
    title: 'Approximating Normal Distribution',
    width: 600,
    height: 400,
    legend: { position: 'none' },
    colors: ['#4285F4'],

    chartArea: { width: 405 },
    hAxis: {
      ticks: [-1, -0.75, -0.5, -0.25, 0, 0.25, 0.5, 0.75, 1]
    },

    bar: {
      gap: 0
    },

    histogram: {
      bucketSize: 0.01,
      maxNumBuckets: 400,
      minValue: -1,
      maxValue: 1
    }
  };

  var chart = new google.visualization.Histogram(document.getElementById('histogram_div'));

  chart.draw(data, options);
}
</script>

<script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawBoxPlot);

function drawBoxPlot() {

  var array = [
    ['a', 100, 90, 110, 85, 96, 104, 120],
    ['b', 120, 95, 130, 90, 113, 124, 140],
    ['c', 130, 105, 140, 100, 117, 133, 139],
    ['d', 90, 85, 95, 85, 88, 92, 95],
    ['e', 70, 74, 63, 67, 69, 70, 72],
    ['f', 30, 39, 22, 21, 28, 34, 40],
    ['g', 80, 77, 83, 70, 77, 85, 90],
    ['h', 100, 90, 110, 85, 95, 102, 110]
  ];

  var data = new google.visualization.DataTable();
  data.addColumn('string', 'x');
  data.addColumn('number', 'series0');
  data.addColumn('number', 'series1');
  data.addColumn('number', 'series2');
  data.addColumn('number', 'series3');
  data.addColumn('number', 'series4');
  data.addColumn('number', 'series5');
  data.addColumn('number', 'series6');

  data.addColumn({id:'max', type:'number', role:'interval'});
  data.addColumn({id:'min', type:'number', role:'interval'});
  data.addColumn({id:'firstQuartile', type:'number', role:'interval'});
  data.addColumn({id:'median', type:'number', role:'interval'});
  data.addColumn({id:'thirdQuartile', type:'number', role:'interval'});

  data.addRows(getBoxPlotValues(array));

  /**
   * Takes an array of input data and returns an
   * array of the input data with the box plot
   * interval data appended to each row.
   */
  function getBoxPlotValues(array) {

    for (var i = 0; i < array.length; i++) {

      var arr = array[i].slice(1).sort(function (a, b) {
        return a - b;
      });

      var max = arr[arr.length - 1];
      var min = arr[0];
      var median = getMedian(arr);

      // First Quartile is the median from lowest to overall median.
      var firstQuartile = getMedian(arr.slice(0, 4));

      // Third Quartile is the median from the overall median to the highest.
      var thirdQuartile = getMedian(arr.slice(3));

      array[i][8] = max;
      array[i][9] = min
      array[i][10] = firstQuartile;
      array[i][11] = median;
      array[i][12] = thirdQuartile;
    }
    return array;
  }

  /*
   * Takes an array and returns
   * the median value.
   */
  function getMedian(array) {
    var length = array.length;

    /* If the array is an even length the
     * median is the average of the two
     * middle-most values. Otherwise the
     * median is the middle-most value.
     */
    if (length % 2 === 0) {
      var midUpper = length / 2;
      var midLower = midUpper - 1;

      return (array[midUpper] + array[midLower]) / 2;
    } else {
      return array[Math.floor(length / 2)];
    }
  }

  var options = {
      title:'Box Plot',
      width: 600,
      height: 400,
      legend: {position: 'none'},
      hAxis: {
        gridlines: {color: '#fff'}
      },
      lineWidth: 0,
      series: [{'color': '#D3362D'}],
      intervals: {
        barWidth: 1,
        boxWidth: 1,
        lineWidth: 2,
        style: 'boxes'
      },
      interval: {
        max: {
          style: 'bars',
          fillOpacity: 1,
          color: '#777'
        },
        min: {
          style: 'bars',
          fillOpacity: 1,
          color: '#777'
        }
      }
  };

  var chart = new google.visualization.LineChart(document.getElementById('boxplot_div'));

  chart.draw(data, options);
}

</script>


<script>

  // set the dimensions and margins of the graph
  var margin = {top: 10, right: 30, bottom: 30, left: 40},
      width = 460 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;
  
  // append the svg object to the body of the page
  var svg = d3.select("#violin_div")
    .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");
  
  // Read the data and compute summary statistics for each specie
  d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/iris.csv", function(data) {
  
    // Build and Show the Y scale
    var y = d3.scaleLinear()
      .domain([ 3.5,8 ])          // Note that here the Y scale is set manually
      .range([height, 0])
    svg.append("g").call( d3.axisLeft(y) )
  
    // Build and Show the X scale. It is a band scale like for a boxplot: each group has an dedicated RANGE on the axis. This range has a length of x.bandwidth
    var x = d3.scaleBand()
      .range([ 0, width ])
      .domain(["setosa", "versicolor", "virginica"])
      .padding(0.05)     // This is important: it is the space between 2 groups. 0 means no padding. 1 is the maximum.
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x))
  
    // Features of the histogram
    var histogram = d3.histogram()
          .domain(y.domain())
          .thresholds(y.ticks(20))    // Important: how many bins approx are going to be made? It is the 'resolution' of the violin plot
          .value(d => d)
  
    // Compute the binning for each group of the dataset
    var sumstat = d3.nest()  // nest function allows to group the calculation per level of a factor
      .key(function(d) { return d.Species;})
      .rollup(function(d) {   // For each key..
        input = d.map(function(g) { return g.Sepal_Length;})    // Keep the variable called Sepal_Length
        bins = histogram(input)   // And compute the binning on it.
        return(bins)
      })
      .entries(data)
  
    // What is the biggest number of value in a bin? We need it cause this value will have a width of 100% of the bandwidth.
    var maxNum = 0
    for ( i in sumstat ){
      allBins = sumstat[i].value
      lengths = allBins.map(function(a){return a.length;})
      longuest = d3.max(lengths)
      if (longuest > maxNum) { maxNum = longuest }
    }
  
    // The maximum width of a violin must be x.bandwidth = the width dedicated to a group
    var xNum = d3.scaleLinear()
      .range([0, x.bandwidth()])
      .domain([-maxNum,maxNum])
  
    // Add the shape to this svg!
    svg
      .selectAll("myViolin")
      .data(sumstat)
      .enter()        // So now we are working group per group
      .append("g")
        .attr("transform", function(d){ return("translate(" + x(d.key) +" ,0)") } ) // Translation on the right to be at the group position
      .append("path")
          .datum(function(d){ return(d.value)})     // So now we are working bin per bin
          .style("stroke", "none")
          .style("fill","#69b3a2")
          .attr("d", d3.area()
              .x0(function(d){ return(xNum(-d.length)) } )
              .x1(function(d){ return(xNum(d.length)) } )
              .y(function(d){ return(y(d.x0)) } )
              .curve(d3.curveCatmullRom)    // This makes the line smoother to give the violin appearance. Try d3.curveStep to see the difference
          )
  })
  
  </script>

  </body>
</html>
