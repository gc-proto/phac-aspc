<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en"
dir="ltr"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="fr" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <title>Manuel de conception de l'Infobase Santé - Canada.ca</title>

    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name="description">
    <!--[if gte IE 9 | !IE ]><!-->
    <link href="https://www.canada.ca/etc/designs/canada/wet-boew/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/wet-boew/css/theme.min.css">
    <link rel="stylesheet" href="../../css/toc.css">
    <link rel="stylesheet" href="../../css/in-page.css">
    <link rel="stylesheet" href="../../css/alpha-beta-banner.css" />


    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script> 		<!-- makes ToC work -->

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <!--<![endif]-->
    <!--[if lt IE 9]>
<link href="./GCWeb/assets/favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="./GCWeb/css/ie8-theme.min.css" />
		<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.
		min.js"></script> <script
		src="./wet-boew/js/ie8-wet-boew.min.js"></script> <![endif]-->
    <!--[if lte IE 9]>
		<![endif]-->
    <noscript>
        <link rel="stylesheet" href="./wet-boew/css/noscript.min.css" />
    </noscript>
</head>

<style>

</style>

<body id="start" class="page-type-nav" vocab="http://schema.org/" typeof="WebPage" data-spy="scroll" data-target="#toc">
  <ul id="wb-tphp">
    <li class="wb-slc">
        <a class="wb-sl" href="#wb-cont">Passer au contenu principal</a>
    </li>
    <li class="wb-slc visible-sm visible-md visible-lg">
        <a class="wb-sl" href="#wb-info">Passer à « Au sujet du gouvernement »</a>
    </li>
</ul>
    <header>
    <div id="wb-bnr" class="container-fluid">
    <section id="wb-lng" class="text-right">
      <h2 class="wb-inv">Sélection de la langue</h2>
      <ul class="list-inline margin-bottom-none">
          <li><a lang="en" href="../../design-system/library/maps.html">English</a></li>
      </ul>
    </section>
    <div class="row">
    <div class="brand col-xs-5 col-md-4">
      <a href="https://www.canada.ca/fr/index.html"><img src="https://www.canada.ca/etc/designs/canada/wet-boew/assets/sig-blk-fr.svg" alt=""><span class="wb-inv"> Gouvernement du Canada / <span lang="en">Government of Canada</span></span></a>
    </div>

    </div>
    </div>



    </header>
    


<main property="mainContentOfPage" class="wb-prettify all-pre">
<div class="container-fluid" style="padding:0px;">
    	<section class="blue-header well well-sm brdr-0 mrgn-bttm-0 mrgn-tp-0">
<h2 class="mrgn-tp-md"><a class="top-menu" href="../index.html">Manuel de conception de l'Infobase Santé</a></h2>
        		</section>
            <section class="brdr-0">
  <div class="row" style="margin-right:0px">

    <section class="col-sm-12 visible-xs visible-sm">

      <a id="btn-toc" class="btn btn-block btn-primary wb-lbx lbx-modal" title="Example of a modal popup" href="#inline_content_modal" style="color: white !important; border-radius: 0px;"><i class="fas fa-bars"></i>&nbsp Table of contents</a>

      <section id="inline_content_modal" class="mfp-hide modal-dialog modal-content overlay-def">
			<header class="modal-header">
        <h2 class="modal-title">Table des matières</h2>
			</header>
			<div class="modal-body">
        <ul>
          <li > <a href="../commencer.html">Démarrer</a></li>
          <li><a href="../donnees.html">Données</a></li>
              <li><a href="../visualisation.html">Mise en récit et visualisation</a>
               </li>
          <li><a href="../bibliotheque.html">Bibliothèque de composantes</a>
          <ul>
            <li><a href="../bibliotheque/boutons.html">Boutons de personnalisation</a></li>
            <li><a href="../bibliotheque/carte.html">Carte</a></li>
            <li><a href="../bibliotheque/thermique.html">Carte thermique</a></li>
            <li><a href="../bibliotheque/barres.html">Diagramme à barres</a></li>
            <li><a href="../bibliotheque/circulaire.html">Diagrammes circulaires et diagramme en anneau</a></li>
            <li><a href="../bibliotheque/ligne.html">Graphique linéaire</a></li>
            <li><a href="../bibliotheque/histogrammes.html">Histogramme</a></li>
            <li><a href="../bibliotheque/cles.html">Indicateurs clés</a></li>
            <li><a href="../bibliotheque/onglets.html">Interface à onglets</a></li>
            <li><a href="../bibliotheque/nuages.html">Nuage de points</a></li>
            <li><a href="../bibliotheque/produits-connexes.html">Produits connexes</a></li>
            <li><a href="../bibliotheque/chrono.html">Sélecteur chronologique</a></li>
            <li><a href="../bibliotheque/deroulant.html">Sélecteur déroulant</a></li>
            <li><a href="../bibliotheque/transitions.html">Transitions</a></li>
          
        </ul>
      
      </li>
          <li><a href="../performance.html">Mesure de la performance et amélioration continue</a>
          </ul>
			</div>
		</section>
    </section>

    <div class="mgrn-tp-xl visible-sm"><p><br></p></div> <!-- temp test fix for menu covering button -->
<div class="col-md-2 global-toc visible-md visible-lg">
  <h2 class="h3 mrgn-lft-md">Table des matières</h2>

  <ul class="menu-list lst-none">

    <li> <a href="../commencer.html">Démarrer</a></li>
    <li><a href="../donnees.html">Données</a></li>
    <li><a href="../visualisation.html">Mise en récit et visualisation</a>
      </li>
    <li><a href="../bibliotheque.html">Bibliothèque de composantes</a>
    
      <ul class="menu-list lst-none">
        <li><a href="../bibliotheque/boutons.html">Boutons de personnalisation</a></li>
        <li><a class="active" href="../bibliotheque/carte.html">Carte</a></li>
        <li><a href="../bibliotheque/thermique.html">Carte thermique</a></li>
        <li><a href="../bibliotheque/barres.html">Diagramme à barres</a></li>
        <li><a href="../bibliotheque/circulaire.html">Diagrammes circulaires et diagramme en anneau</a></li>
        <li><a href="../bibliotheque/ligne.html">Graphique linéaire</a></li>
        <li><a href="../bibliotheque/histogrammes.html">Histogramme</a></li>
        <li><a href="../bibliotheque/cles.html">Indicateurs clés</a></li>
        <li><a href="../bibliotheque/onglets.html">Interface à onglets</a></li>
        <li><a href="../bibliotheque/nuages.html">Nuage de points</a></li>
        <li><a href="../bibliotheque/produits-connexes.html">Produits connexes</a></li>
        <li><a href="../bibliotheque/chrono.html">Sélecteur chronologique</a></li>
        <li><a href="../bibliotheque/deroulant.html">Sélecteur déroulant</a></li>
        <li><a href="../bibliotheque/transitions.html">Transitions</a></li>
      </ul>
  
    </li>
    <li><a  href="../performance.html">Mesure de la performance et amélioration continue</a>
      </li>
  
  </ul>
  
</div>


    <div class="col-md-2 visible-md visible-lg">

      <nav id="toc" data-spy="affix" data-toggle="toc" class="affix" >


<h2 class="h3 mrgn-lft-lg">Sur cette page</h2>



<ul class="nav mrgn-lft-lg">
  <li class="longdoc-toc-link"><a href="#quand">Quand utiliser cette composante</a></li>
  <li class="longdoc-toc-link"><a href="#eviter">Quoi éviter</a></li>
  <li class="longdoc-toc-link"><a href="#design">Design et code</a></li>
  <li class="longdoc-toc-link"><a href="#contenu">Lignes directrices sur le contenu</a></li>
  <li class="longdoc-toc-link"><a href="#accessibilite">Lignes directrices sur l'accessibilité</a></li>
  <!--<li class="longdoc-toc-link"><a href="#recherche">Recherche</a></li>-->

</ul>

          </nav>
    </div>

<div class="col-md-7 mrgn-tp-lg" style="padding-left: 40px; padding-right: 40px">

<h1 class="gc-thickline mrgn-tp-0">Carte</h1>
<p>Une carte est une représentation visuelle des données géographiques. Elle montre l'emplacement des points ou des caractéristiques de données dans une région géographique donnée.</p>

<div class="visible-xs visible-sm">

<h2 class="h3">Sur cette page</h2>
<ul>
  <li><a href="#quand">Quand utiliser cette composante</a></li>
  <li><a href="#eviter">Quoi éviter</a></li>
  <li><a href="#design">Design et code</a></li>
  <li><a href="#contenu">Lignes directrices sur le contenu</a></li>
  <li><a href="#accessibilite">Lignes directrices sur l'accessibilité</a></li>
  <!--<li><a href="#recherche">Recherche</a></li>-->

</ul>
</div>
<h2 id="quand">Quand utiliser cette composante</h2>
<ul>
  <li>Pour montrer l'emplacement des points de données sur une carte</li>
  <li>Pour montrer la distribution géographique des données</li>
  <li>Pour comparer les données entre les régions</li>
</ul>

<div class="well well-sm cnt-wdth-lmtd"">
  <h3 class="mrgn-tp-sm">Exemples</h3>
  <ul>
    <li>Une carte montrant la distribution des cas d'une maladie spécifique, telle que le virus du Nil occidental</li>
    <li>Une carte montrant l'emplacement des sites de consommation supervisée</li>
  </ul>
  </div>

<h2 id="eviter">Quoi éviter</h2>
<ul>
  <li>N'utilisez pas une carte pour montrer des données qui n'ont pas un emplacement géographique clair</li>
  <li>N'utilisez pas une carte lorsqu'il n'y a rien à apprendre de la distribution géographique des données</li>
</ul>

<h2 id="design">Design et code</h2>
<div class="pattern-demo mrgn-bttm-md">

  <div class="row" id="mapcontainer">
    <div class="col-md-12" style="padding-right: 0px;" id="map"></div>
  </div>
  
  </div>
  
  <details>
    <summary>HTML</summary>
    <button class="btn btn-default" onclick="CopyToClipboard('code1');return false;">Copier dans le presse-papiers</button>
    <pre id="code1"><code>&lt;!-- Ajouter ce div dans la bonne section--&gt;
  &lt;div class="col-md-12" style="padding-right: 0px;" id="map"&gt;&lt;/div&gt;</code></pre>
  </details>
  
  <details>
    <summary>JS</summary>
    <button class="btn btn-default" onclick="CopyToClipboard('code2');return false;">Copier dans le presse-papiers</button>
    <pre id="code2"><code>&lt;!-- Ajouter ces références --&gt;
  &lt;script src="https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://health-infobase.canada.ca/src/js/polyfill.js"&gt;&lt;/script&gt;
  &lt;script src="https://health-infobase.canada.ca/src/js/topojson.v2.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://health-infobase.canada.ca/src/js/polylabel.js"&gt;&lt;/script&gt;
  &lt;script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"&gt;&lt;/script&gt;
    
  &lt;!-- Ajouter ce script --&gt; 
  &lt;script&gt;
    // Language
    var language = $('html').attr('lang');
    const margin = {
        top: 10,
        right: 10,
        bottom: 10,
        left: 10
      },
      width = 1300 - margin.left - margin.right, //width of the section
      height = 1200 - (margin.top) - (margin.bottom); //height of the section
    var path
    var hrid
    d3.csv("https://test.canada.ca/phac-aspc/design-system/library/map/AllPTs3.csv", function(d) {
      d.Year = +d["Year"]
      d.CNISP_beds = +d["CNISP_beds"]
      d.total = +d["total"]
      d.proportion = +d["proportion"]
      d.Percentage = +d["Percentage"]
      d.Prov = d["Prov"]
      return d;
    }).then(function(data) {
      console.log(data)
      var nestedData = d3.nest().key(function(d) {
        return d.Year;
      }).key(function(d) {
        return d.Prov;
      }).object(data);
      //Converts the PRUID number to the acronym
      function PruidtoProv(pruid) {
        if (pruid == 10) {
          return "NL";
        } else if (pruid == 11) {
          return "PE";
        } else if (pruid == 12) {
          return "NS";
        } else if (pruid == 13) {
          return "NB";
        } else if (pruid == 24) {
          return "QC";
        } else if (pruid == 35) {
          return "ON";
        } else if (pruid == 46) {
          return "MB";
        } else if (pruid == 47) {
          return "SK";
        } else if (pruid == 48) {
          return "AB";
        } else if (pruid == 59) {
          return "BC";
        } else if (pruid == 60) {
          return "YT";
        } else if (pruid == 61) {
          return "NT";
        } else if (pruid == 62) {
          return "NU";
        }
      }
  
      function colour() {
        d3.selectAll(".PRUID").transition().style("fill", function(d, i) {
          pr = PruidtoProv(d.properties.PRUID)
          console.log(nestedData[2021][pr][0]["proportion"])
          val = nestedData[2021][pr][0]["proportion"]
          if (!isNaN(val) && val != -1) {
            return ColourChoice(val) //color2(nestedData.get(d.properties.PRUID)[0][ddl2]); function that returns the colour
          } else {
            return "#e6e6e6";
          }
        });
      }
      var colours = ["#A52770", "#D83C76", "#F65D6D", "#FD876F", "#FFB185"]
  
      function ColourChoice(val) {
        if (val >= .80) {
          return colours[0]
        } else if (val >= .60) {
          return colours[1]
        } else if (val >= .40) {
          return colours[2]
        } else if (val >= .20) {
          return colours[3]
        } else if (val >= 0) {
          return colours[4]
        } else {
          return "#e6e6e6"
        }
      }
      d3.json('https://test.canada.ca/phac-aspc/design-system/library/map/output.json').then(function(mapJSON) {
        var svg = d3.select('#map').append('svg').attr("id", "svg").attr('width', "100%").attr('height', "100%").attr("preserveAspectRatio", "xMinYMin meet").attr("viewBox", "0 0 900 900")
        var healthregions = topojson.feature(mapJSON, mapJSON.objects.Can_PR2016);
        const projection2 = d3.geoIdentity((function(x, y) {
          return [2 * x, y];
        })).reflectY(true).fitSize([880, 880], healthregions);
        // what is used to generate the path for the provinces
        path = d3.geoPath().projection(projection2);
        hrid = svg.append('g').attr("id", "mapGroup").attr("transform", "translate(0,0)").selectAll('g').data(healthregions.features).enter();
        hrid.append("g").attr("class", "regions").attr("id", function(d) {
          return "g" + d.properties["PRUID"]
        }).attr("tabindex", 0).attr("data-taborder", function(d) {
          return d.properties.TABORDER;
        }).attr("focusable", "true").append('path').attr("id", function(d) {
          return "path" + d.properties["PRUID"]
        }).attr("class", "PRUID").attr("d", path).attr("stroke", "white").attr("stroke-width", 0.5).style("opacity", 0.85)
        colour();
      });
    });
  &lt;/script&gt;</code></pre>
  </details>


<h2 id="contenu">Lignes directrices sur le contenu</h2>
<ul>
  <li>Si vous créez une carte choroplèthe (où la teinte est liée à la valeur numérique), utilisez la plus petite zone géographique possible</li>
  <li>Suivez les <a href="../visualisation/visualisation/design.html">lignes directrices générales sur le contenu</a> </li>
</ul>

<h2 id="accessibilite">Lignes directrices sur l'accessibilité</h2>
<ul>
  <li>Fournissez un tableau de données avec la carte</li>
  <li>Si la carte raconte une histoire claire, incluez cette histoire dans le texte alternatif - par exemple, si la carte montre que les nombres sont beaucoup plus élevés dans une région spécifique, écrivez cela dans le texte alternatif</li>
  <li>Suivez les <a href="../visualisation/visualisation/design.html#accessibilite">lignes directrices générales sur l'accessibilité</a> </li>
</ul>

<!--<h2 id="resarch">Research</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In lorem dolor, feugiat eu placerat vitae, laoreet a elit. Ut eleifend nec elit quis elementum. Mauris dignissim nunc quam, sed mattis risus fringilla id. Integer luctus, mi vitae efficitur elementum, enim ex scelerisque mi, id venenatis elit justo sit amet dolor. Suspendisse ornare pulvinar maximus. Aenean ac mi ullamcorper purus dictum tincidunt porta a sem. Donec a purus vel ex congue commodo. Integer lacinia neque eget metus tempor maximus. Nunc rhoncus, lacus porttitor sodales tristique, nulla ipsum tempor tellus, vel vestibulum ligula sem nec elit. Etiam consequat hendrerit tincidunt. Sed et tellus hendrerit, blandit mauris quis, blandit velit. Vestibulum volutpat, lectus at ullamcorper egestas, est lacus auctor libero, in sagittis sem massa in eros. Fusce vestibulum, purus in lacinia semper, dolor velit venenatis ex, eget placerat nisl eros vel est. Quisque nulla velit, vehicula eu tempor vitae, faucibus feugiat velit. Suspendisse lectus augue, laoreet vitae enim ac, congue pretium lorem.

</p> -->


    <div class="clearfix"></div>
    	<div class="row pagedetails">




    		<div class="datemod col-xs-12 mrgn-tp-lg">
    				<dl id="wb-dtmd">
    		<dt>Date modified:</dt>
    		<dd><time property="dateModified">2022-10-28</time></dd>
    	</dl>
    		</div>

    	</div>
    		</main>

      </section>





</div>


    		<footer id="wb-info">
    	<div class="landscape">
    	<nav class="container wb-navcurr">
    	<h2 class="wb-inv">About this guide</h2>
    	<ul class="list-unstyled colcount-sm-2 colcount-md-3">
    	<li><a href="mailto:phac.infobase.aspc@canada.ca">Contact the Infobase Team</a></li>
    	<li><a href="https://www.canada.ca/en/government/dept.html">Departments and agencies</a></li>
    	<li><a href="https://www.canada.ca/en/government/publicservice.html">Public service and military</a></li>
    	<li><a href="https://www.canada.ca/en/news.html">News</a></li>
    	<li><a href="https://www.canada.ca/en/government/system/laws.html">Treaties, laws and regulations</a></li>
    	<li><a href="https://www.canada.ca/en/transparency/reporting.html">Government-wide reporting</a></li>
    	<li><a href="https://pm.gc.ca/eng">Prime Minister</a></li>
    	<li><a href="https://www.canada.ca/en/government/system.html">How government works</a></li>
    	<li><a href="https://open.canada.ca/en/">Open government</a></li>
    	</ul>
    	</nav>
    	</div>
    	<div class="brand">
    	<div class="container">
    	<div class="row">
    	<nav class="col-md-9 col-lg-10 ftr-urlt-lnk">
    	<h2 class="wb-inv">About this site</h2>
    	<ul>
    	<li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
    	<li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
    	<li><a href="https://www1.canada.ca/en/newsite.html">About Canada.ca</a></li>
    	<li><a href="https://www.canada.ca/en/transparency/terms.html">Terms and conditions</a></li>
    	<li><a href="https://www.canada.ca/en/transparency/privacy.html">Privacy</a></li>
    	</ul>
    	</nav>
    	<div class="col-xs-6 visible-sm visible-xs tofpg">
    	<a href="#wb-cont">Top of Page <span class="glyphicon glyphicon-chevron-up"></span></a>
    	</div>
    	<div class="col-xs-6 col-md-3 col-lg-2 text-right">
    	<img src="http://www.canada.ca/etc/designs/canada/wet-boew/assets/wmms-blk.svg" alt="Symbol of the Government of Canada">
    	</div>
    	</div>
    	</div>
    	</div>
    	</footer>
    	<!--[if gte IE 9 | !IE ]><!-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
      <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/wet-boew.min.js"></script>
      <script src="../../js/toc-custom.js"></script>
      <script src="../../js/alpha-banner.js"></script>

      <!--<![endif]-->
      <!--[if lt IE 9]>
          <script src="./wet-boew/js/ie8-wet-boew2.min.js"></script>

          <![endif]-->
          <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/theme.min.js"></script>


          <script src="https://d3js.org/d3.v5.min.js"></script>
          <script type="text/javascript" src="https://health-infobase.canada.ca/src/js/polyfill.js"></script>
          <script src="https://health-infobase.canada.ca/src/js/topojson.v2.min.js"></script>
          <script src="https://health-infobase.canada.ca/src/js/polylabel.js"></script>
          <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
        <script>
          // Language
          var language = $('html').attr('lang');
          
          const margin = {
            top: 10,
            right: 10,
            bottom: 10,
            left: 10
           },
           width = 1300 - margin.left - margin.right, //width of the section
           height = 1200 - (margin.top) - (margin.bottom); //height of the section
          
          var path
          var hrid
          
          d3.csv("https://test.canada.ca/phac-aspc/design-system/library/map/AllPTs3.csv", function(d) {
           d.Year = +d["Year"]
           d.CNISP_beds = +d["CNISP_beds"]
           d.total = +d["total"]
           d.proportion = +d["proportion"]
           d.Percentage = +d["Percentage"]
           d.Prov = d["Prov"]
           return d;
          
          }).then(function(data) {
           console.log(data)
          
           var nestedData = d3.nest()
            .key(function(d) { return d.Year; })
            .key(function(d) { return d.Prov; })
            .object(data);
          
           //Converts the PRUID number to the acronym
           function PruidtoProv(pruid) {
            if (pruid == 10) {
             return "NL";
            }
            else if (pruid == 11) {
             return "PE";
            }
            else if (pruid == 12) {
             return "NS";
            }
            else if (pruid == 13) {
             return "NB";
            }
            else if (pruid == 24) {
             return "QC";
            }
            else if (pruid == 35) {
             return "ON";
            }
            else if (pruid == 46) {
             return "MB";
            }
            else if (pruid == 47) {
             return "SK";
            }
            else if (pruid == 48) {
             return "AB";
            }
            else if (pruid == 59) {
             return "BC";
            }
            else if (pruid == 60) {
             return "YT";
            }
            else if (pruid == 61) {
             return "NT";
            }
            else if (pruid == 62) {
             return "NU";
            }
           }
          
           function colour() {
            d3.selectAll(".PRUID")
             .transition()
             .style("fill", function(d, i) {
              pr = PruidtoProv(d.properties.PRUID)
              console.log(nestedData[2021][pr][0]["proportion"])
              val = nestedData[2021][pr][0]["proportion"]
              if (!isNaN(val) && val != -1) {
               return ColourChoice(val) //color2(nestedData.get(d.properties.PRUID)[0][ddl2]); function that returns the colour
              }
              else {
               return "#e6e6e6";
              }
             });
           }
          
           var colours = ["#A52770", "#D83C76", "#F65D6D", "#FD876F", "#FFB185"]
           function ColourChoice(val) {
            if (val >= .80) {
             return colours[0]
            }
            else if (val >= .60) {
             return colours[1]
            }
            else if (val >= .40) {
             return colours[2]
            }
            else if (val >= .20) {
             return colours[3]
            }
            else if (val >= 0) {
             return colours[4]
            }
            else {
             return "#e6e6e6"
            }
           }
          
           d3.json('https://test.canada.ca/phac-aspc/design-system/library/map/output.json').then(function(mapJSON) {
          
            var svg = d3.select('#map')
             .append('svg')
             .attr("id", "svg")
             .attr('width', "100%")
             .attr('height', "100%")
             .attr("preserveAspectRatio", "xMinYMin meet")
             .attr("viewBox", "0 0 900 900")
          
            var healthregions = topojson.feature(mapJSON, mapJSON.objects.Can_PR2016);
          
            const projection2 = d3.geoIdentity((function(x, y) {
              return [2 * x, y];
             }))
             .reflectY(true)
             .fitSize([880, 880], healthregions);
          
            // what is used to generate the path for the provinces
            path = d3.geoPath().projection(projection2);
          
            hrid = svg
             .append('g')
             .attr("id", "mapGroup")
             .attr("transform", "translate(0,0)")
             .selectAll('g')
             .data(healthregions.features)
             .enter();
          
            hrid
             .append("g")
             .attr("class", "regions")
             .attr("id", function(d) { return "g" + d.properties["PRUID"] })
             .attr("tabindex", 0)
             .attr("data-taborder", function(d) {
              return d.properties.TABORDER;
             })
             .attr("focusable", "true")
             .append('path')
             .attr("id", function(d) { return "path" + d.properties["PRUID"] })
             .attr("class", "PRUID")
             .attr("d", path)
             .attr("stroke", "white")
             .attr("stroke-width", 0.5)
             .style("opacity", 0.85)
          
            colour();
          
           });
          });
    </script>

      <script>
        function CopyToClipboard(id)
        {
        var r = document.createRange();
        r.selectNode(document.getElementById(id));
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(r);
        document.execCommand('copy');
        window.getSelection().removeAllRanges();
        }
        </script>
  </body>
</html>



